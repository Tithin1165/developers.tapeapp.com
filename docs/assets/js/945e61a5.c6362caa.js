"use strict";(self.webpackChunkdev_portal=self.webpackChunkdev_portal||[]).push([[7841],{3123:(e,t,a)=>{a.d(t,{Z:()=>s});var n=a(7294),i=a(6010),o={note:n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},n.createElement("path",{fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"})),tip:n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},n.createElement("path",{fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"})),danger:n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},n.createElement("path",{fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"})),info:n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},n.createElement("path",{fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"})),caution:n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},n.createElement("path",{fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))},l={note:"secondary",tip:"success",danger:"danger",info:"info",caution:"warning"};function s(e){var t=e.children,a=e.type,s=e.title,r=void 0===s?a:s,m=e.icon,c=void 0===m?o[a]:m;return n.createElement("div",{className:(0,i.Z)("admonition","admonition-"+a,"alert","alert--"+l[a])},n.createElement("div",{className:"admonition-heading"},n.createElement("h5",null,n.createElement("span",{className:"admonition-icon"},c),r)),n.createElement("div",{className:"admonition-content"},t))}},9549:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>u,contentTitle:()=>d,default:()=>k,frontMatter:()=>p,metadata:()=>h,toc:()=>v});var n=a(7462),i=a(3366),o=(a(7294),a(3905)),l=a(4757),s=a(9877),r=a(8215),m=a(7859),c=(a(3123),["components"]),p={id:"email",title:"Email",sidebar_label:"Email"},d=void 0,h={unversionedId:"api/resource/email",id:"api/resource/email",title:"Email",description:"For communication that happens outside of tape, the API offers an endpoint to send emails.",source:"@site/docs/api/resource/email.md",sourceDirName:"api/resource",slug:"/api/resource/email",permalink:"/docs/api/resource/email",editUrl:"https://github.com/tape-dev/developers.tapeapp.com/edit/main/apps/dev-portal/docs/api/resource/email.md",tags:[],version:"current",frontMatter:{id:"email",title:"Email",sidebar_label:"Email"},sidebar:"mainSidebar",previous:{title:"Webhook",permalink:"/docs/api/resource/webhook"},next:{title:"Introduction",permalink:"/docs/calculation/introduction"}},u={},v=[{value:"Sending an Email",id:"sending-an-email",level:2},{value:"limits",id:"limits",level:2},{value:"Rate limit credits",id:"rate-limit-credits",level:2}],f={toc:v};function k(e){var t=e.components,a=(0,i.Z)(e,c);return(0,o.kt)("wrapper",(0,n.Z)({},f,a,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"For communication that happens outside of tape, the API offers an endpoint to send emails."),(0,o.kt)("h2",{id:"sending-an-email"},"Sending an Email"),(0,o.kt)(l.Z,{method:"POST",url:"https://api.tapeapp.com/v1/email/send",mdxType:"EndpointBadge"}),(0,o.kt)("p",null,"To send an email to one or more recipients, make a POST request to that endpoint. The POST body must contain the ",(0,o.kt)("inlineCode",{parentName:"p"},"to")," property with one or more recipient email addresses, the ",(0,o.kt)("inlineCode",{parentName:"p"},"subject")," property, and the ",(0,o.kt)("inlineCode",{parentName:"p"},"html")," property which contains the formatted email body."),(0,o.kt)("p",null,"Optionally, the request can contain ",(0,o.kt)("inlineCode",{parentName:"p"},"cc"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"bcc")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"reply_to")," properties, all of which can contain a list of email addresses."),(0,o.kt)("p",null,"Further specify ",(0,o.kt)("inlineCode",{parentName:"p"},"attachment_ids"),", an array of existing file IDs analog to the attachment field type (temporary file ids are not yet supported). More details on file inputs can be found ",(0,o.kt)("a",{parentName:"p",href:"/docs/api/resource/field-value/attachment"},"here"),"."),(0,o.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"If a POST request with a valid payload is submitted to this endpoint, the email is queued and not sent directly in the request transaction.\nThe response to the request only contains information about whether the email passed input validation and was successfully queued, not whether the email was successfully delivered.\nCurrently, there is no way to query the delivery status of an email through the API."),(0,o.kt)("p",{parentName:"div"},"If an email could not be delivered, the job is rescheduled after 10, 100 and 1000 seconds. If the email could not be delivered after the 4th attempt, the job is canceled."))),(0,o.kt)("p",null,"The following example sends an email with subject, and body to ",(0,o.kt)("inlineCode",{parentName:"p"},"recipient@example.com")," with the default sender address.\nIn case the recipient clicks on reply-to in its email client, the recipient of the reply is ",(0,o.kt)("inlineCode",{parentName:"p"},"reply-to@example.com")),(0,o.kt)(s.Z,{defaultValue:"curl",mdxType:"Tabs"},(0,o.kt)(r.Z,{value:"curl",label:"cURL",mdxType:"TabItem"},(0,o.kt)(m.Z,{language:"shell",title:"\u27a1\ufe0f \xa0\xa0   Request",mdxType:"ContextCodeBlock"},'curl -X POST #BASE_URL/v1/email/send  \\\n  -u #USER_API_KEY: \\\n  -H "Content-Type: application/json" \\\n  --data \'{\n    "to": "recipient@example.com",\n    "subject": "Hello World",\n    "html": "<p> Today we show you how to use the reply_to property in emails. </p>",\n    "reply_to": "reply-to@example.com",\n}\'\n')),(0,o.kt)(r.Z,{value:"json",label:"JSON",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="\u27a1\ufe0f \xa0\xa0   Request">',title:'"\u27a1\ufe0f',"\xa0\xa0":!0,"":!0,'Request">':!0},'{\n  "value": "This is a comment on record with ID 1.",\n  "to": "recipient@example.com",\n  "subject": "Hello World",\n  "html": "<p> This is the email body. </p>",\n  "reply_to": "reply-to@example.com"\n}\n')))),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json",metastring:"title='\u2b05\ufe0f \xa0\xa0   Response'",title:"'\u2b05\ufe0f","\xa0\xa0":!0,"":!0,"Response'":!0},'{\n  "status": "SUCCESSFULLY_SCHEDULED"\n}\n')),(0,o.kt)("p",null,"By default, emails are sent from the address ",(0,o.kt)("inlineCode",{parentName:"p"},"reply.automations@tape-app.com"),"."),(0,o.kt)("b",null,"Coming Soon: "),(0,o.kt)("br",null),"If your organization has configured its own SMTP server in the organization settings, the email can also be sent from your own email address. To do this, specify the `use_organization_smtp_config` flag and the `from` property that contains the sender address. Note that your SMTP server must be authorized to send email on behalf of this address for the email to be sent successfully.",(0,o.kt)("br",null),(0,o.kt)("br",null),'The next example sends an email with subject, and body to "recipient-one@example.com" and "recipient-two@example.com" with the sender address "sender@example.com". The addresses "carbon-copy-one@example.com" and "carbon-copy-two@example.com" recieve a copy of the email. In addition, the email contains an attachment with file ID 42, which is present in an attachment or image field-value in a record in your organization.',(0,o.kt)(s.Z,{defaultValue:"curl",mdxType:"Tabs"},(0,o.kt)(r.Z,{value:"curl",label:"cURL",mdxType:"TabItem"},(0,o.kt)(m.Z,{language:"shell",title:"\u27a1\ufe0f \xa0\xa0   Request",mdxType:"ContextCodeBlock"},'curl -X POST #BASE_URL/v1/email/send  \\\n  -u #USER_API_KEY: \\\n  -H "Content-Type: application/json" \\\n  --data \'{\n    "from": "sender@example.com",\n    "to": ["recipient-one@example.com", "recipient-two@example.com"],\n    "subject": "Hello World",\n    "html": "<p> Today we show you how to use the cc property in emails. </p>",\n    "cc": ["carbon-copy-one@example.com", "carbon-copy-two@example.com"],\n    "attachment_ids": [42]\n}\'\n')),(0,o.kt)(r.Z,{value:"json",label:"JSON",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="\u27a1\ufe0f \xa0\xa0   Request">',title:'"\u27a1\ufe0f',"\xa0\xa0":!0,"":!0,'Request">':!0},'{\n  "from": "sender@example.com",\n  "to": ["recipient-one@example.com", "recipient-two@example.com"],\n  "subject": "Hello World",\n  "html": "<p> Today we show you how to use the cc property in emails. </p>",\n  "cc": ["carbon-copy-one@example.com", "carbon-copy-two@example.com"],\n  "attachment_ids": [42]\n}\n')))),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json",metastring:"title='\u2b05\ufe0f \xa0\xa0   Response'",title:"'\u2b05\ufe0f","\xa0\xa0":!0,"":!0,"Response'":!0},'{\n  "status": "SUCCESSFULLY_SCHEDULED"\n}\n')),(0,o.kt)("h2",{id:"limits"},"limits"),(0,o.kt)("p",null,"The following limits are enforced for each email:"),(0,o.kt)("table",null,(0,o.kt)("thead",{parentName:"table"},(0,o.kt)("tr",{parentName:"thead"},(0,o.kt)("th",{parentName:"tr",align:"left"},"Variable"),(0,o.kt)("th",{parentName:"tr",align:"left"},"Limit"))),(0,o.kt)("tbody",{parentName:"table"},(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"left"},"Maximum total attachment size"),(0,o.kt)("td",{parentName:"tr",align:"left"},"20MB")))),(0,o.kt)("h2",{id:"rate-limit-credits"},"Rate limit credits"),(0,o.kt)("p",null,"Emails are rate limited based on their number of recipient addresses (sum of addresses contained in the properties ",(0,o.kt)("inlineCode",{parentName:"p"},"to"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"cc")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"bcc")," of the request body). Every request consumes an additional credit:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"Sending to 1 recipient:  2x credits\nSending to 2 recipients: 3x credits\n...\nSending to 10 recipients: 11x credits\n...\n")),(0,o.kt)("p",null,"As you can see, sending the same email to multiple recipients at one costs less credits than sending the same email to multiple recipients separately.\nNote that with the first option, each recipient sees the other recipients. Depending on the use case, this could conflict with your privacy policy."))}k.isMDXComponent=!0}}]);