"use strict";(self.webpackChunkdev_portal=self.webpackChunkdev_portal||[]).push([[74],{4757:(e,t,o)=>{o.d(t,{Z:()=>n});var a=o(7294);function n(e){var t,o=e.method,n=e.url;switch(o){case"GET":t="#007959";break;case"POST":t="#0071BB";break;case"PUT":t="#DEA700";break;case"DELETE":t="#DF245E"}return a.createElement("div",{style:{display:"flex",flexDirection:"row",fontSize:"15px",lineHeight:"15px",marginBottom:"13px"}},a.createElement("span",{style:{backgroundColor:t,color:"var(--tape-color-lightest)",borderRadius:"999px",padding:"4px 9px 3px 9px",fontWeight:700,fontSize:"11px",lineHeight:"11px"}},o.toUpperCase()),a.createElement("span",{style:{color:"var(--tape-color-darker)",marginLeft:"9px",marginTop:"2px"}},n))}},8215:(e,t,o)=>{o.d(t,{Z:()=>n});var a=o(7294);function n(e){var t=e.children,o=e.hidden,n=e.className;return a.createElement("div",{role:"tabpanel",hidden:o,className:n},t)}},9877:(e,t,o)=>{o.d(t,{Z:()=>d});var a=o(7462),n=o(7294),r=o(2389),i=o(3725),l=o(6010);const s="tabItem_LplD";function p(e){var t,o,r,p=e.lazy,d=e.block,u=e.defaultValue,c=e.values,h=e.groupId,m=e.className,k=n.Children.map(e.children,(function(e){if((0,n.isValidElement)(e)&&void 0!==e.props.value)return e;throw new Error("Docusaurus error: Bad <Tabs> child <"+("string"==typeof e.type?e.type:e.type.name)+'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.')})),v=null!=c?c:k.map((function(e){var t=e.props;return{value:t.value,label:t.label,attributes:t.attributes}})),b=(0,i.lx)(v,(function(e,t){return e.value===t.value}));if(b.length>0)throw new Error('Docusaurus error: Duplicate values "'+b.map((function(e){return e.value})).join(", ")+'" found in <Tabs>. Every value needs to be unique.');var g=null===u?u:null!=(t=null!=u?u:null==(o=k.find((function(e){return e.props.default})))?void 0:o.props.value)?t:null==(r=k[0])?void 0:r.props.value;if(null!==g&&!v.some((function(e){return e.value===g})))throw new Error('Docusaurus error: The <Tabs> has a defaultValue "'+g+'" but none of its children has the corresponding value. Available values are: '+v.map((function(e){return e.value})).join(", ")+". If you intend to show no default tab, use defaultValue={null} instead.");var f=(0,i.UB)(),w=f.tabGroupChoices,y=f.setTabGroupChoices,T=(0,n.useState)(g),x=T[0],N=T[1],E=[],R=(0,i.o5)().blockElementScrollPositionUntilNextRender;if(null!=h){var I=w[h];null!=I&&I!==x&&v.some((function(e){return e.value===I}))&&N(I)}var _=function(e){var t=e.currentTarget,o=E.indexOf(t),a=v[o].value;a!==x&&(R(t),N(a),null!=h&&y(h,a))},C=function(e){var t,o=null;switch(e.key){case"ArrowRight":var a=E.indexOf(e.currentTarget)+1;o=E[a]||E[0];break;case"ArrowLeft":var n=E.indexOf(e.currentTarget)-1;o=E[n]||E[E.length-1]}null==(t=o)||t.focus()};return n.createElement("div",{className:"tabs-container"},n.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,l.Z)("tabs",{"tabs--block":d},m)},v.map((function(e){var t=e.value,o=e.label,r=e.attributes;return n.createElement("li",(0,a.Z)({role:"tab",tabIndex:x===t?0:-1,"aria-selected":x===t,key:t,ref:function(e){return E.push(e)},onKeyDown:C,onFocus:_,onClick:_},r,{className:(0,l.Z)("tabs__item",s,null==r?void 0:r.className,{"tabs__item--active":x===t})}),null!=o?o:t)}))),p?(0,n.cloneElement)(k.filter((function(e){return e.props.value===x}))[0],{className:"margin-vert--md"}):n.createElement("div",{className:"margin-vert--md"},k.map((function(e,t){return(0,n.cloneElement)(e,{key:t,hidden:e.props.value!==x})}))))}function d(e){var t=(0,r.Z)();return n.createElement(p,(0,a.Z)({key:String(t)},e))}},9699:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>m,contentTitle:()=>c,default:()=>b,frontMatter:()=>u,metadata:()=>h,toc:()=>k});var a=o(7462),n=o(3366),r=(o(7294),o(3905)),i=o(7859),l=o(4757),s=o(9877),p=o(8215),d=["components"],u={id:"webhook",title:"Webhook",sidebar_label:"Webhook"},c=void 0,h={unversionedId:"api/resource/webhook",id:"api/resource/webhook",title:"Webhook",description:"A webhook enables Tape to push real-time notifications to your app. Tape uses HTTP or HTTPS to send these notifications to your app as a JSON payload. You can then use these notifications to execute actions in your backend systems.",source:"@site/docs/api/resource/webhook.md",sourceDirName:"api/resource",slug:"/api/resource/webhook",permalink:"/docs/api/resource/webhook",editUrl:"https://github.com/tape-dev/developers.tapeapp.com/edit/main/apps/dev-portal/docs/api/resource/webhook.md",tags:[],version:"current",frontMatter:{id:"webhook",title:"Webhook",sidebar_label:"Webhook"},sidebar:"mainSidebar",previous:{title:"Link Preview",permalink:"/docs/api/resource/link-preview"},next:{title:"Introduction",permalink:"/docs/calculation/introduction"}},m={},k=[{value:"Create a webhook",id:"create-a-webhook",level:2},{value:"Request hook verification",id:"request-hook-verification",level:2},{value:"Validate hook verification",id:"validate-hook-verification",level:2},{value:"Delete a webhook",id:"delete-a-webhook",level:2},{value:"Webhook types",id:"webhook-types",level:2},{value:"Record created",id:"record-created",level:3},{value:"Record updated",id:"record-updated",level:3},{value:"Record deleted",id:"record-deleted",level:3},{value:"Error handling",id:"error-handling",level:2},{value:"Rate Limits",id:"rate-limits",level:2}],v={toc:k};function b(e){var t=e.components,o=(0,n.Z)(e,d);return(0,r.kt)("wrapper",(0,a.Z)({},v,o,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"A webhook enables Tape to push real-time notifications to your app. Tape uses HTTP or HTTPS to send these notifications to your app as a JSON payload. You can then use these notifications to execute actions in your backend systems."),(0,r.kt)("h2",{id:"create-a-webhook"},"Create a webhook"),(0,r.kt)("p",null,"A webhook can be created via the API by providing a URL and the type of events you want to get notified for. See the list of available webhook types ",(0,r.kt)("a",{parentName:"p",href:"#webhook-types"},"below"),"."),(0,r.kt)(l.Z,{method:"POST",url:"https://api.tapeapp.com/v1/hook/app/{app_id}",mdxType:"EndpointBadge"}),(0,r.kt)(s.Z,{defaultValue:"curl",mdxType:"Tabs"},(0,r.kt)(p.Z,{value:"curl",label:"cURL",mdxType:"TabItem"},(0,r.kt)(i.Z,{language:"shell",title:"\u27a1\ufe0f \xa0\xa0   Request",mdxType:"ContextCodeBlock"},'curl -X POST #BASE_URL/v1/hook/app/1 \\\n  -u #USER_API_KEY: \\\n  -H "Content-Type: application/json" \\\n  --data \'{\n    "type": "record.create",\n    "url": "https://webhook.example.org/example-webhook-endpoint"\n  }\' \n')),(0,r.kt)(p.Z,{value:"json",label:"JSON",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="\u27a1\ufe0f \xa0\xa0   Request">',title:'"\u27a1\ufe0f',"\xa0\xa0":!0,"":!0,'Request">':!0},'{\n  "type": "record.create",\n  "url": "https://webhook.example.org/example-webhook-endpoint"\n}\n')))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json",metastring:"title='\u2b05\ufe0f \xa0\xa0   Response'",title:"'\u2b05\ufe0f","\xa0\xa0":!0,"":!0,"Response'":!0},'{\n  "hook_id": 1,\n  "url": "https://webhook.example.org/example-webhook-endpoint",\n  "status": "inactive"\n}\n')),(0,r.kt)("h2",{id:"request-hook-verification"},"Request hook verification"),(0,r.kt)(l.Z,{method:"POST",url:"https://api.tapeapp.com/v1/hook/{hook_id}/verify/request",mdxType:"EndpointBadge"}),(0,r.kt)("p",null,"To avoid potential abuse of webhooks and increase security, every webhook URL must be verified first before Tape starts sending requests to that URL. You can request the verification code via the API. This will cause the webhook to send a request to the URL with the parameter ",(0,r.kt)("inlineCode",{parentName:"p"},"type")," set to ",(0,r.kt)("inlineCode",{parentName:"p"},"hook.verify")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"code")," set to the verification code. The endpoint must then call the validate method with the code to complete the verification."),(0,r.kt)(i.Z,{language:"shell",title:"\u27a1\ufe0f \xa0\xa0   Request",mdxType:"ContextCodeBlock"},"curl -X POST #BASE_URL/v1/hook/1/verify/request \\\n  -u #USER_API_KEY:\n"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json",metastring:"title='\u2b05\ufe0f \xa0\xa0   Response'",title:"'\u2b05\ufe0f","\xa0\xa0":!0,"":!0,"Response'":!0},'{\n  "hook_id": 1,\n  "url": "https://webhook.example.org/example-webhook-endpoint",\n  "status": "inactive"\n}\n')),(0,r.kt)("p",null,"The Tape server will send a POST request to the provided URL with the following body:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json",metastring:"title='\u2b05\ufe0f \xa0\xa0   Incoming request'",title:"'\u2b05\ufe0f","\xa0\xa0":!0,"":!0,Incoming:!0,"request'":!0},'{\n  "hook_id": 1,\n  "type": "hook.verify",\n  "code": "f43d05e6"\n}\n')),(0,r.kt)("h2",{id:"validate-hook-verification"},"Validate hook verification"),(0,r.kt)("p",null,"Validates the hook using the code received from the verify call. On successful validation the hook will become active."),(0,r.kt)(l.Z,{method:"POST",url:"https://api.tapeapp.com/v1/hook/{hook_id}/verify/validate",mdxType:"EndpointBadge"}),(0,r.kt)(s.Z,{defaultValue:"curl",mdxType:"Tabs"},(0,r.kt)(p.Z,{value:"curl",label:"cURL",mdxType:"TabItem"},(0,r.kt)(i.Z,{language:"shell",title:"\u27a1\ufe0f \xa0\xa0   Request",mdxType:"ContextCodeBlock"},'curl -X POST #BASE_URL/v1/hook/1/verify/validate \\\n  -u #USER_API_KEY: \\\n  -H "Content-Type: application/json" \\\n  --data \'{\n    "code": "f43d05e6"\n  }\' \n')),(0,r.kt)(p.Z,{value:"json",label:"JSON",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="\u27a1\ufe0f \xa0\xa0   Request">',title:'"\u27a1\ufe0f',"\xa0\xa0":!0,"":!0,'Request">':!0},'{\n  "code": "f43d05e6"\n}\n')))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json",metastring:"title='\u2b05\ufe0f \xa0\xa0   Response'",title:"'\u2b05\ufe0f","\xa0\xa0":!0,"":!0,"Response'":!0},'{\n  "hook_id": 1,\n  "url": "https://webhook.example.org/example-webhook-endpoint",\n  "status": "active"\n}\n')),(0,r.kt)("h2",{id:"delete-a-webhook"},"Delete a webhook"),(0,r.kt)(l.Z,{method:"DELETE",url:"https://api.tapeapp.com/v1/hook/{hook_id}",mdxType:"EndpointBadge"}),(0,r.kt)("p",null,"A webhook can be deleted via the API by providing the ID of the webhook."),(0,r.kt)(i.Z,{language:"shell",title:"\u27a1\ufe0f \xa0\xa0   Request",mdxType:"ContextCodeBlock"},"curl -X DELETE #BASE_URL/v1/hook/1 \\\n  -u #USER_API_KEY:\n"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json",metastring:"title='\u2b05\ufe0f \xa0\xa0   Response'",title:"'\u2b05\ufe0f","\xa0\xa0":!0,"":!0,"Response'":!0},'{\n  "hook_id": 1\n}\n')),(0,r.kt)("h2",{id:"webhook-types"},"Webhook types"),(0,r.kt)("p",null,"Webhooks have to specify a ",(0,r.kt)("inlineCode",{parentName:"p"},"type"),", which indicates which events should be sent to this webhook. The types of webhooks currently available are the following:"),(0,r.kt)("h3",{id:"record-created"},"Record created"),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"record.create")," webhook type allows you to get notified whenever a record was created in the app the webhook is registered for. Here is an example incoming POST request payload:"),(0,r.kt)(s.Z,{mdxType:"Tabs"},(0,r.kt)(p.Z,{value:"json",label:"JSON",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json",metastring:"title='\u2b05\ufe0f \xa0\xa0   Incoming request'",title:"'\u2b05\ufe0f","\xa0\xa0":!0,"":!0,Incoming:!0,"request'":!0},'{\n  "hook_id": 1,\n  "record_id": 100,\n  "type": "record.create"\n}\n'))),(0,r.kt)(p.Z,{value:"http",label:"HTTP",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-http",metastring:"title='\u2b05\ufe0f \xa0\xa0   Incoming request'",title:"'\u2b05\ufe0f","\xa0\xa0":!0,"":!0,Incoming:!0,"request'":!0},'POST https://webhook.example.org/example-webhook-endpoint\n\nAccept          application/json, text/plain, */*\nContent-type    application/json;charset=utf-8\nUser-agent      Tape Webhook\nContent-length  51\nHost            localhost:3009\nConnection      close\n\n{\n  "hook_id": 1,\n  "record_id": 100,\n  "type": "record.create"\n}\n')))),(0,r.kt)("h3",{id:"record-updated"},"Record updated"),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"record.update")," webhook type allows you to get notified whenever a record was updated in the app the webhook is registered for. Here is an example incoming POST request payload:"),(0,r.kt)(s.Z,{mdxType:"Tabs"},(0,r.kt)(p.Z,{value:"json",label:"JSON",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json",metastring:"title='\u2b05\ufe0f \xa0\xa0   Incoming request'",title:"'\u2b05\ufe0f","\xa0\xa0":!0,"":!0,Incoming:!0,"request'":!0},'{\n  "hook_id": 1,\n  "record_id": 100,\n  "type": "record.update"\n}\n'))),(0,r.kt)(p.Z,{value:"http",label:"HTTP",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-http",metastring:"title='\u2b05\ufe0f \xa0\xa0   Incoming request'",title:"'\u2b05\ufe0f","\xa0\xa0":!0,"":!0,Incoming:!0,"request'":!0},'POST https://webhook.example.org/example-webhook-endpoint\n\nAccept          application/json, text/plain, */*\nContent-type    application/json;charset=utf-8\nUser-agent      Tape Webhook\nContent-length  51\nHost            localhost:3009\nConnection      close\n\n{\n  "hook_id": 1,\n  "record_id": 100,\n  "type": "record.update"\n}\n')))),(0,r.kt)("h3",{id:"record-deleted"},"Record deleted"),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"record.delete")," webhook type allows you to get notified whenever a record was deleted in the app the webhook is registered for. Here is an example incoming POST request payload:"),(0,r.kt)(s.Z,{mdxType:"Tabs"},(0,r.kt)(p.Z,{value:"json",label:"JSON",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json",metastring:"title='\u2b05\ufe0f \xa0\xa0   Incoming request'",title:"'\u2b05\ufe0f","\xa0\xa0":!0,"":!0,Incoming:!0,"request'":!0},'{\n  "hook_id": 1,\n  "record_id": 100,\n  "type": "record.delete"\n}\n'))),(0,r.kt)(p.Z,{value:"http",label:"HTTP",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-http",metastring:"title='\u2b05\ufe0f \xa0\xa0   Incoming request'",title:"'\u2b05\ufe0f","\xa0\xa0":!0,"":!0,Incoming:!0,"request'":!0},'POST https://webhook.example.org/example-webhook-endpoint\n\nAccept          application/json, text/plain, */*\nContent-type    application/json;charset=utf-8\nUser-agent      Tape Webhook\nContent-length  51\nHost            localhost:3009\nConnection      close\n\n{\n  "hook_id": 1,\n  "record_id": 100,\n  "type": "record.delete"\n}\n')))),(0,r.kt)("h2",{id:"error-handling"},"Error handling"),(0,r.kt)("p",null,"The webhook must respond with a 2xx status code. If the status code is different from 2xx more than 50 consecutive times the webhook will return to being unverified and will have to be verified again to be active. Additionally, your webhook may return to unverified if you do not send responses in a timely manner (5 seconds). You should handle any heavy processing asynchronously."),(0,r.kt)("p",null,"Only hooks on port 80 and 443 are supported, i.e. you cannot use ",(0,r.kt)("inlineCode",{parentName:"p"},"http://www.example.org/webhook:8080"),", only ",(0,r.kt)("inlineCode",{parentName:"p"},"http://www.example.org/webhook")," or ",(0,r.kt)("inlineCode",{parentName:"p"},"https://www.example.org/webhook"),"."),(0,r.kt)("h2",{id:"rate-limits"},"Rate Limits"),(0,r.kt)("p",null,"Webhook executions are rate limited. The current rate limit is 100 webhook executions per minute per app."),(0,r.kt)("div",{className:"admonition admonition-caution alert alert--warning"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"Rate limits may change")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"In the future, Tape plans to adjust rate limits to balance for demand and reliability. Tape may also introduce distinct rate limits for organizations in different pricing plans."))))}b.isMDXComponent=!0}}]);