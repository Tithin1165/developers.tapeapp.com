"use strict";(self.webpackChunkdev_portal=self.webpackChunkdev_portal||[]).push([[3979],{7859:(e,t,n)=>{n.d(t,{Z:()=>d});var a=n(2263),r=n(2792),i=n(1736),o=n(6010),l=n(7294);const s="codeBlock_FKPJ";function d(e){var t=e.children,n=e.language,d=e.title,c=(0,l.useState)((0,r.W5)()),p=c[0],u=c[1];(0,l.useEffect)((0,r.kw)((0,a.Z)(),u),[]);var m=(0,r.hd)(p),v=(0,r.jM)(p),h=(0,r.dz)(p),f=(0,r.xe)(p);function g(e){return(e||"").replace(new RegExp("#USER_API_KEY","g"),m).replace(new RegExp("#BASE_URL","g"),f).replace(new RegExp("#RECORD_ID","g"),v).replace(new RegExp("#RECORD_TITLE","g"),h)}var k=("string"==typeof t?[t]:Array.isArray(t)?t:[]).map((function(e){return"string"==typeof e?g(e):e})),w=g(d);return l.createElement("div",{className:(0,o.Z)(s)},l.createElement(i.Z,{title:w,language:n},k))}},4757:(e,t,n)=>{n.d(t,{Z:()=>r});var a=n(7294);function r(e){var t,n=e.method,r=e.url;switch(n){case"GET":t="#007959";break;case"POST":t="#0071BB";break;case"PUT":t="#DEA700";break;case"DELETE":t="#DF245E"}return a.createElement("div",{style:{display:"flex",flexDirection:"row",fontSize:"15px",lineHeight:"15px",marginBottom:"13px"}},a.createElement("span",{style:{backgroundColor:t,color:"var(--tape-color-lightest)",borderRadius:"999px",padding:"4px 9px 3px 9px",fontWeight:700,fontSize:"11px",lineHeight:"11px"}},n.toUpperCase()),a.createElement("span",{style:{color:"var(--tape-color-darker)",marginLeft:"9px",marginTop:"2px"}},r))}},3123:(e,t,n)=>{n.d(t,{Z:()=>l});var a=n(7294),r=n(6010),i={note:a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},a.createElement("path",{fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"})),tip:a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},a.createElement("path",{fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"})),danger:a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},a.createElement("path",{fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"})),info:a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},a.createElement("path",{fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"})),caution:a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},a.createElement("path",{fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))},o={note:"secondary",tip:"success",danger:"danger",info:"info",caution:"warning"};function l(e){var t=e.children,n=e.type,l=e.title,s=void 0===l?n:l,d=e.icon,c=void 0===d?i[n]:d;return a.createElement("div",{className:(0,r.Z)("admonition","admonition-"+n,"alert","alert--"+o[n])},a.createElement("div",{className:"admonition-heading"},a.createElement("h5",null,a.createElement("span",{className:"admonition-icon"},c),s)),a.createElement("div",{className:"admonition-content"},t))}},8215:(e,t,n)=>{n.d(t,{Z:()=>r});var a=n(7294);function r(e){var t=e.children,n=e.hidden,r=e.className;return a.createElement("div",{role:"tabpanel",hidden:n,className:r},t)}},9877:(e,t,n)=>{n.d(t,{Z:()=>c});var a=n(7462),r=n(7294),i=n(2389),o=n(3725),l=n(6010);const s="tabItem_LplD";function d(e){var t,n,i,d=e.lazy,c=e.block,p=e.defaultValue,u=e.values,m=e.groupId,v=e.className,h=r.Children.map(e.children,(function(e){if((0,r.isValidElement)(e)&&void 0!==e.props.value)return e;throw new Error("Docusaurus error: Bad <Tabs> child <"+("string"==typeof e.type?e.type:e.type.name)+'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.')})),f=null!=u?u:h.map((function(e){var t=e.props;return{value:t.value,label:t.label,attributes:t.attributes}})),g=(0,o.lx)(f,(function(e,t){return e.value===t.value}));if(g.length>0)throw new Error('Docusaurus error: Duplicate values "'+g.map((function(e){return e.value})).join(", ")+'" found in <Tabs>. Every value needs to be unique.');var k=null===p?p:null!=(t=null!=p?p:null==(n=h.find((function(e){return e.props.default})))?void 0:n.props.value)?t:null==(i=h[0])?void 0:i.props.value;if(null!==k&&!f.some((function(e){return e.value===k})))throw new Error('Docusaurus error: The <Tabs> has a defaultValue "'+k+'" but none of its children has the corresponding value. Available values are: '+f.map((function(e){return e.value})).join(", ")+". If you intend to show no default tab, use defaultValue={null} instead.");var w=(0,o.UB)(),b=w.tabGroupChoices,N=w.setTabGroupChoices,E=(0,r.useState)(k),R=E[0],y=E[1],x=[],C=(0,o.o5)().blockElementScrollPositionUntilNextRender;if(null!=m){var T=b[m];null!=T&&T!==R&&f.some((function(e){return e.value===T}))&&y(T)}var _=function(e){var t=e.currentTarget,n=x.indexOf(t),a=f[n].value;a!==R&&(C(t),y(a),null!=m&&N(m,a))},D=function(e){var t,n=null;switch(e.key){case"ArrowRight":var a=x.indexOf(e.currentTarget)+1;n=x[a]||x[0];break;case"ArrowLeft":var r=x.indexOf(e.currentTarget)-1;n=x[r]||x[x.length-1]}null==(t=n)||t.focus()};return r.createElement("div",{className:"tabs-container"},r.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,l.Z)("tabs",{"tabs--block":c},v)},f.map((function(e){var t=e.value,n=e.label,i=e.attributes;return r.createElement("li",(0,a.Z)({role:"tab",tabIndex:R===t?0:-1,"aria-selected":R===t,key:t,ref:function(e){return x.push(e)},onKeyDown:D,onFocus:_,onClick:_},i,{className:(0,l.Z)("tabs__item",s,null==i?void 0:i.className,{"tabs__item--active":R===t})}),null!=n?n:t)}))),d?(0,r.cloneElement)(h.filter((function(e){return e.props.value===R}))[0],{className:"margin-vert--md"}):r.createElement("div",{className:"margin-vert--md"},h.map((function(e,t){return(0,r.cloneElement)(e,{key:t,hidden:e.props.value!==R})}))))}function c(e){var t=(0,i.Z)();return r.createElement(d,(0,a.Z)({key:String(t)},e))}},3648:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>u,contentTitle:()=>c,default:()=>h,frontMatter:()=>d,metadata:()=>p,toc:()=>m});var a=n(7462),r=n(3366),i=(n(7294),n(3905)),o=n(4757),l=(n(9877),n(8215),n(7859)),s=(n(3123),["components"]),d={id:"record-revision",title:"Record Revision",sidebar_label:"Record Revision"},c=void 0,p={unversionedId:"api/resource/record-revision",id:"api/resource/record-revision",title:"Record Revision",description:"As Records in Tape change over time, it is important to understand what changes were made, by whom and when. Revisions can be retrieved via the API.",source:"@site/docs/api/resource/record-revision.md",sourceDirName:"api/resource",slug:"/api/resource/record-revision",permalink:"/docs/api/resource/record-revision",editUrl:"https://github.com/tape-dev/developers.tapeapp.com/edit/main/apps/dev-portal/docs/api/resource/record-revision.md",tags:[],version:"current",frontMatter:{id:"record-revision",title:"Record Revision",sidebar_label:"Record Revision"},sidebar:"mainSidebar",previous:{title:"Record Comment",permalink:"/docs/api/resource/record-comment"},next:{title:"App",permalink:"/docs/api/resource/app"}},u={},m=[{value:"Revisions concept",id:"revisions-concept",level:2},{value:"Retrieve Revisions for a Record",id:"retrieve-revisions-for-a-record",level:2},{value:"Retrieve Revision delta",id:"retrieve-revision-delta",level:2}],v={toc:m};function h(e){var t=e.components,n=(0,r.Z)(e,s);return(0,i.kt)("wrapper",(0,a.Z)({},v,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"As Records in Tape change over time, it is important to understand what changes were made, by whom and when. Revisions can be retrieved via the API."),(0,i.kt)("h2",{id:"revisions-concept"},"Revisions concept"),(0,i.kt)("p",null,"Every record in Tape has a ",(0,i.kt)("inlineCode",{parentName:"p"},"revision")," number property, that starts with ",(0,i.kt)("inlineCode",{parentName:"p"},"0")," upon creation and is increased with each change made to the Record."),(0,i.kt)("p",null,"Record revisions will include the author of the revision as ",(0,i.kt)("inlineCode",{parentName:"p"},"created_by"),", the date and time of the revision ",(0,i.kt)("inlineCode",{parentName:"p"},"created_on")," and the revision number."),(0,i.kt)("h2",{id:"retrieve-revisions-for-a-record"},"Retrieve Revisions for a Record"),(0,i.kt)(o.Z,{method:"GET",url:"https://api.tapeapp.com/v1/record/{record_id}/revision",mdxType:"EndpointBadge"}),(0,i.kt)("p",null,"The following example fetches the revisions of record with ID ",(0,i.kt)("inlineCode",{parentName:"p"},"1"),", that was created and updated once by the user ",(0,i.kt)("inlineCode",{parentName:"p"},"Dan Jacob")," with ID ",(0,i.kt)("inlineCode",{parentName:"p"},"600"),":"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:"left"},"Query param"),(0,i.kt)("th",{parentName:"tr",align:"left"},"Type"),(0,i.kt)("th",{parentName:"tr",align:"left"},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"left"},(0,i.kt)("inlineCode",{parentName:"td"},"include_deleted")),(0,i.kt)("td",{parentName:"tr",align:"left"},(0,i.kt)("inlineCode",{parentName:"td"},"boolean")),(0,i.kt)("td",{parentName:"tr",align:"left"},"Include records that are deleted but still accessible via a trash (default: ",(0,i.kt)("inlineCode",{parentName:"td"},"false"),")")))),(0,i.kt)(l.Z,{language:"shell",title:"\u27a1\ufe0f \xa0\xa0   Request",mdxType:"ContextCodeBlock"},"curl -X GET #BASE_URL/v1/record/1/revision  \\\n  -u #USER_API_KEY:\n"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json",metastring:"title='\u2b05\ufe0f \xa0\xa0   Response'",title:"'\u2b05\ufe0f","\xa0\xa0":!0,"":!0,"Response'":!0},'{\n  "total": 2,\n  "revisions": [\n    {\n      "created_by": {\n        "user_id": 600,\n        "name": "Dan Jacob",\n        "type": "user",\n        "image": null\n      },\n      "created_on": "2022-03-16 14:25:00",\n      "type": "creation",\n      "revision": 0\n    },\n    {\n      "created_by": {\n        "user_id": 600,\n        "name": "Dan Jacob",\n        "type": "user",\n        "image": null\n      },\n      "created_on": "2022-03-16 14:30:00",\n      "type": "update",\n      "revision": 1\n    }\n  ]\n}\n')),(0,i.kt)("div",{className:"admonition admonition-caution alert alert--warning"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"Note")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"Note that ",(0,i.kt)("strong",{parentName:"p"},(0,i.kt)("em",{parentName:"strong"},"Revisions"))," do not contain the actual changes made, but only the meta data. Use the endpoint described in the next section to fetch individual revision changes."))),(0,i.kt)("h2",{id:"retrieve-revision-delta"},"Retrieve Revision delta"),(0,i.kt)(o.Z,{method:"GET",url:"https://api.tapeapp.com/v1/record/{record_id}/revision/previous/{toRevisionId}",mdxType:"EndpointBadge"}),(0,i.kt)("p",null,"In order to understand how a record changed over time, the Tape-API provides consumers with the concept of ",(0,i.kt)("strong",{parentName:"p"},(0,i.kt)("em",{parentName:"strong"},"Revision Deltas")),". Revision deltas will include a ",(0,i.kt)("inlineCode",{parentName:"p"},"from")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"to")," property, describing the transition of individual fields from one value (or no value) to another (or none). These properties follow the same form as record field ",(0,i.kt)("inlineCode",{parentName:"p"},"values")," property, check the ",(0,i.kt)("a",{parentName:"p",href:"/docs/api/resource/field-value/overview"},"field value section")," for more details."),(0,i.kt)("p",null,"A single record revision may include deltas for multiple fields, if the changes were made at the same time by the same entity."),(0,i.kt)("p",null,"The following example fetches the revision delta of revision number ",(0,i.kt)("inlineCode",{parentName:"p"},"1")," of record with ID ",(0,i.kt)("inlineCode",{parentName:"p"},"1")," to its previous revision number ",(0,i.kt)("inlineCode",{parentName:"p"},"0")," to understand the changes made from the previous example. One may now see that a single text field with external_id ",(0,i.kt)("inlineCode",{parentName:"p"},"notes")," was updated from no value to the value ",(0,i.kt)("inlineCode",{parentName:"p"},"Some important notes"),"."),(0,i.kt)(l.Z,{language:"shell",title:"\u27a1\ufe0f \xa0\xa0   Request",mdxType:"ContextCodeBlock"},"curl -X GET #BASE_URL/v1/record/1/revision/previous/1  \\\n  -u #USER_API_KEY:\n"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json",metastring:"title='\u2b05\ufe0f \xa0\xa0   Response'",title:"'\u2b05\ufe0f","\xa0\xa0":!0,"":!0,"Response'":!0},'{\n  "total": 2,\n  "revision_deltas": [\n    {\n      "from": [],\n      "external_id": "notes",\n      "field_id": 2000,\n      "label": "Notes",\n      "to": [\n        {\n          "value": "Some important notes"\n        }\n      ],\n      "type": "contact",\n      "config": {\n        "description": null,\n        "required": false,\n        "label": "Notes"\n      }\n    }\n  ]\n}\n')))}h.isMDXComponent=!0}}]);