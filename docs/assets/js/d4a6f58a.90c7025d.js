"use strict";(self.webpackChunkdev_portal=self.webpackChunkdev_portal||[]).push([[6759],{3905:(e,t,r)=>{r.d(t,{Zo:()=>p,kt:()=>u});var a=r(7294);function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t){if(null==e)return{};var r,a,i=function(e,t){if(null==e)return{};var r,a,i={},n=Object.keys(e);for(a=0;a<n.length;a++)r=n[a],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(a=0;a<n.length;a++)r=n[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var l=a.createContext({}),d=function(e){var t=a.useContext(l),r=t;return e&&(r="function"==typeof e?e(t):o(o({},t),e)),r},p=function(e){var t=d(e.components);return a.createElement(l.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},c=a.forwardRef((function(e,t){var r=e.components,i=e.mdxType,n=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),c=d(r),u=i,h=c["".concat(l,".").concat(u)]||c[u]||m[u]||n;return r?a.createElement(h,o(o({ref:t},p),{},{components:r})):a.createElement(h,o({ref:t},p))}));function u(e,t){var r=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var n=r.length,o=new Array(n);o[0]=c;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:i,o[1]=s;for(var d=2;d<n;d++)o[d]=r[d];return a.createElement.apply(null,o)}return a.createElement.apply(null,r)}c.displayName="MDXCreateElement"},3451:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>p,contentTitle:()=>l,default:()=>u,frontMatter:()=>s,metadata:()=>d,toc:()=>m});var a=r(7462),i=r(3366),n=(r(7294),r(3905)),o=["components"],s={id:"request-limits",title:"Request Limits",sidebar_label:"Request Limits"},l=void 0,d={unversionedId:"api/request-limits",id:"api/request-limits",title:"Request Limits",description:"To ensure a consistent developer experience for all API users, the Tape API is rate limited and basic size limits apply to request parameters.",source:"@site/docs/api/rate-limiting.md",sourceDirName:"api",slug:"/api/request-limits",permalink:"/docs/api/request-limits",editUrl:"https://github.com/tape-dev/developers.tapeapp.com/edit/main/apps/dev-portal/docs/api/rate-limiting.md",tags:[],version:"current",frontMatter:{id:"request-limits",title:"Request Limits",sidebar_label:"Request Limits"},sidebar:"mainSidebar",previous:{title:"Errors",permalink:"/docs/api/errors"},next:{title:"Date & Timezone",permalink:"/docs/api/date-timezone"}},p={},m=[{value:"Rate limits",id:"rate-limits",level:2},{value:"Rate limit credits",id:"rate-limit-credits",level:3},{value:"Rate limit headers",id:"rate-limit-headers",level:3},{value:"Tips for reducing API usage",id:"tips-for-reducing-api-usage",level:3},{value:"Getting more credits",id:"getting-more-credits",level:3},{value:"Size limits",id:"size-limits",level:2}],c={toc:m};function u(e){var t=e.components,r=(0,i.Z)(e,o);return(0,n.kt)("wrapper",(0,a.Z)({},c,r,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("p",null,"To ensure a consistent developer experience for all API users, the Tape API is rate limited and basic size limits apply to request parameters."),(0,n.kt)("h2",{id:"rate-limits"},"Rate limits"),(0,n.kt)("p",null,"Rate-limited requests will return a ",(0,n.kt)("inlineCode",{parentName:"p"},"too_many_requests")," error code (HTTP response status 429). ",(0,n.kt)("strong",{parentName:"p"},"The base rate limit for incoming requests is an average of 3 requests per second"),". Some bursts beyond the average rate are allowed."),(0,n.kt)("p",null,"Integrations should accommodate variable rate limits by handling HTTP 429 responses and backing off (or slowing down) the speed of future requests. A common way to implement this is using one or several queues for pending requests, which can be consumed by sending requests as long as Tape does not respond with an HTTP 429."),(0,n.kt)("div",{className:"admonition admonition-caution alert alert--warning"},(0,n.kt)("div",{parentName:"div",className:"admonition-heading"},(0,n.kt)("h5",{parentName:"div"},(0,n.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,n.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},(0,n.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"Rate limits may change")),(0,n.kt)("div",{parentName:"div",className:"admonition-content"},(0,n.kt)("p",{parentName:"div"},"In the future, Tape plans to adjust rate limits to balance for demand and reliability. Tape may also introduce distinct rate limits for organizations in different pricing plans."))),(0,n.kt)("h3",{id:"rate-limit-credits"},"Rate limit credits"),(0,n.kt)("p",null,"Tape uses a credit-based system to enforce rate limits. Each API key has a certain amount of credits per time interval (currently 50 credits per minute). After the time interval, the credits are replenished. By default, each request costs 1 credit. Certain requests can cost more credits if they are expensive to execute. An example would be a request that fetches records with the maximum page size with all their fields or the deletion of a workspace. Each endpoint documentation includes the number of credits required for each request."),(0,n.kt)("p",null,"You can see how many credits your API key has left, when your credits will be replenished, and how many credits are required for a request via the rate limit headers."),(0,n.kt)("h3",{id:"rate-limit-headers"},"Rate limit headers"),(0,n.kt)("p",null,"Rate limit headers are sent ",(0,n.kt)("strong",{parentName:"p"},"with every response"),". This allows the integration to prevent rate limiting errors and back off before the actual rate limit is hit."),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:"left"},"HTTP Header"),(0,n.kt)("th",{parentName:"tr",align:"left"},"Description"),(0,n.kt)("th",{parentName:"tr",align:"left"},"Example"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},(0,n.kt)("inlineCode",{parentName:"td"},"X-RateLimit-Limit ")),(0,n.kt)("td",{parentName:"tr",align:"left"},"Total credits that can be used per time interval"),(0,n.kt)("td",{parentName:"tr",align:"left"},(0,n.kt)("inlineCode",{parentName:"td"},"1000"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},(0,n.kt)("inlineCode",{parentName:"td"},"X-Retry-Remaining")),(0,n.kt)("td",{parentName:"tr",align:"left"},"Credits remaining for the application in this time interval"),(0,n.kt)("td",{parentName:"tr",align:"left"},(0,n.kt)("inlineCode",{parentName:"td"},"400"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},(0,n.kt)("inlineCode",{parentName:"td"},"X-Retry-Cost")),(0,n.kt)("td",{parentName:"tr",align:"left"},"The amount of credits consumed by the current request"),(0,n.kt)("td",{parentName:"tr",align:"left"},(0,n.kt)("inlineCode",{parentName:"td"},"20"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},(0,n.kt)("inlineCode",{parentName:"td"},"X-Retry-Reset")),(0,n.kt)("td",{parentName:"tr",align:"left"},"The date at which the credits will be reset"),(0,n.kt)("td",{parentName:"tr",align:"left"},(0,n.kt)("inlineCode",{parentName:"td"},"2022-03-01 12:00:00"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},(0,n.kt)("inlineCode",{parentName:"td"},"Retry-After")),(0,n.kt)("td",{parentName:"tr",align:"left"},"The amount of seconds remaining in this interval until credits are resetted"),(0,n.kt)("td",{parentName:"tr",align:"left"},(0,n.kt)("inlineCode",{parentName:"td"},"60"))))),(0,n.kt)("p",null,"Here is an example for the response headers of a valid request:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-http"},"HTTP/1.1 200 OK\nRetry-After: 57\nX-RateLimit-Limit: 50\nX-Retry-Remaining: 46\nX-Retry-Cost: 2\nX-Retry-Reset: 2022-03-19 14:44:36\n")),(0,n.kt)("p",null,"In case the rate limit is exceeded, the error response body will also include alle rate limit information:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "status_code": 429,\n  "endpoint": "/v1/record/123",\n  "error_code": "too_many_requests",\n  "error_message": "Too many requests (0/50 points left), retry after 58 seconds (2022-03-19 14:41:11). Your current request costs 10 points. Check https://developers.tapeapp.com/ for more info",\n  "retry_after": 58,\n  "rate_limit": 50,\n  "rate_limit_remaining": 0,\n  "rate_limit_cost": 10,\n  "rate_limit_reset": "2022-03-19 14:41:11"\n}\n')),(0,n.kt)("h3",{id:"tips-for-reducing-api-usage"},"Tips for reducing API usage"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Avoid making API requests inside loops. Instead of loading individual objects inside a loop, load a collection of objects in one API operation."),(0,n.kt)("li",{parentName:"ul"},"Use result caching where applicable."),(0,n.kt)("li",{parentName:"ul"},"Do not poll for changed data. Use webhooks to react to changes instead."),(0,n.kt)("li",{parentName:"ul"},"Use logging to see how many requests you're making")),(0,n.kt)("h3",{id:"getting-more-credits"},"Getting more credits"),(0,n.kt)("p",null,"If your integration needs more credits per time interval, you can always ask the Tape team to increase the rate limit credits of your API key. It is discouraged to do key rotations to get around this problem."),(0,n.kt)("h2",{id:"size-limits"},"Size limits"),(0,n.kt)("p",null,"Tape limits the size of certain parameters. A requests that exceeds any of these limits will return ",(0,n.kt)("inlineCode",{parentName:"p"},"validation_error")," error code (HTTP response status 400) and contain more specific details in the ",(0,n.kt)("inlineCode",{parentName:"p"},"error_message")," property."),(0,n.kt)("p",null,"Integrations should avoid sending requests beyond these limits proactively. It may be helpful to use test data in your own test suite which intentionally contains large parameters to verify that the errors are handled appropriately. For example, if the integration reads a URL from an external system to put into a Tape record, the integration should have a plan to deal with URLs that are beyond the length limit. The integration might choose to log the error, or send an alert to the user who set up the integration via an email, or some other action."))}u.isMDXComponent=!0}}]);