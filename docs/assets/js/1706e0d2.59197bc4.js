"use strict";(self.webpackChunkdev_portal=self.webpackChunkdev_portal||[]).push([[4965],{3085:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>f,contentTitle:()=>u,default:()=>h,frontMatter:()=>c,metadata:()=>m,toc:()=>_});var i=t(7462),a=t(3366),p=(t(7294),t(3905)),l=t(4757),s=t(9877),o=t(8215),r=t(7859),d=["components"],c={id:"relation",title:"Relation Field",sidebar_label:"Relation"},u=void 0,m={unversionedId:"api/resource/field/relation",id:"api/resource/field/relation",title:"Relation Field",description:"There are two types of relation fields: singlerelation and multirelation.",source:"@site/docs/api/resource/field/relation.md",sourceDirName:"api/resource/field",slug:"/api/resource/field/relation",permalink:"/docs/api/resource/field/relation",editUrl:"https://github.com/tape-dev/developers.tapeapp.com/edit/main/apps/dev-portal/docs/api/resource/field/relation.md",tags:[],version:"current",frontMatter:{id:"relation",title:"Relation Field",sidebar_label:"Relation"},sidebar:"mainSidebar",previous:{title:"Status",permalink:"/docs/api/resource/field/status"},next:{title:"Attachment",permalink:"/docs/api/resource/field/attachment"}},f={},_=[{value:"App creation",id:"app-creation",level:2},{value:"App update",id:"app-update",level:2}],g={toc:_};function h(e){var n=e.components,t=(0,a.Z)(e,d);return(0,p.kt)("wrapper",(0,i.Z)({},g,t,{components:n,mdxType:"MDXLayout"}),(0,p.kt)("p",null,"There are two types of relation fields: ",(0,p.kt)("inlineCode",{parentName:"p"},"single_relation")," and ",(0,p.kt)("inlineCode",{parentName:"p"},"multi_relation"),"."),(0,p.kt)("p",null,(0,p.kt)("inlineCode",{parentName:"p"},"single_relation")," fields can only hold a single record reference while ",(0,p.kt)("inlineCode",{parentName:"p"},"multi_relation")," fields can hold multiple record references."),(0,p.kt)("p",null,"In addition to the common field properties, a relation field definition has a ",(0,p.kt)("inlineCode",{parentName:"p"},"settings")," property ",(0,p.kt)("inlineCode",{parentName:"p"},"referenced_apps")," containing the IDs of the apps that can be referenced by the field.\nWhen creating a record with a relation field value, only records of apps specified in the field definitions ",(0,p.kt)("inlineCode",{parentName:"p"},"referenced_apps")," can be referenced."),(0,p.kt)("p",null,"The ",(0,p.kt)("inlineCode",{parentName:"p"},"referenced_apps")," property is an array of objects with the following properties:"),(0,p.kt)("ul",null,(0,p.kt)("li",{parentName:"ul"},(0,p.kt)("inlineCode",{parentName:"li"},"app_id")," (required): The ID of the referenced app. You can only reference Apps to which you have access to."),(0,p.kt)("li",{parentName:"ul"},(0,p.kt)("inlineCode",{parentName:"li"},"view_id")," (optional): The ID of the view that is used to restrict the referencable records with filters. (currently no enpoints to create or update views exist, but views can be created and updated via the web application)")),(0,p.kt)("h2",{id:"app-creation"},"App creation"),(0,p.kt)(l.Z,{method:"POST",url:"https://api.tapeapp.com/v1/app",mdxType:"EndpointBadge"}),(0,p.kt)("p",null,"A relation field can be created as part of an App creation. Here is an example request body for creating an excerp of a Development-Issues app within a workspace with ID 1."),(0,p.kt)("p",null,"The app contains a ",(0,p.kt)("inlineCode",{parentName:"p"},"single_relation"),' field "Belongs to Epic" with a reference to the "Epics" app with ID 2.'),(0,p.kt)("p",null,(0,p.kt)("inlineCode",{parentName:"p"},"multi_relation")," fields are created in the same way as ",(0,p.kt)("inlineCode",{parentName:"p"},"single_relation")," fields."),(0,p.kt)(s.Z,{defaultValue:"curl",mdxType:"Tabs"},(0,p.kt)(o.Z,{value:"curl",label:"cURL",mdxType:"TabItem"},(0,p.kt)(r.Z,{language:"shell",title:"\u27a1\ufe0f \xa0\xa0   Request",mdxType:"ContextCodeBlock"},'\ncurl -X POST #BASE_URL/v1/app/ \\\n   -u #USER_API_KEY: \\\n   -H "Content-Type: application/json" \\\n   --data \'{\n    "workspace_id": 1,\n    "name": "Development-Issues",\n    "item_name": "Issue",\n    "fields": [\n      {\n        "field_type": "single_relation",\n        "config": {\n          "label": "Belongs to Epic",\n          "description": "The epic this issue belongs to.",\n          "required": true,\n          "settings": {\n            "referenced_apps": [\n              {\n                "app_id": 2\n              }\n            ]\n          }\n        }\n      }\n    ] \n  }\'\n')),(0,p.kt)(o.Z,{value:"json",label:"JSON",mdxType:"TabItem"},(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="\u27a1\ufe0f \xa0\xa0   Request">',title:'"\u27a1\ufe0f',"\xa0\xa0":!0,"":!0,'Request">':!0},'{\n  "workspace_id": 1,\n  "name": "Development-Issues",\n  "item_name": "Issue",\n  "fields": [\n    {\n      "field_type": "single_relation",\n      "config": {\n        "label": "Belongs to Epic",\n        "description": "The epic this issue belongs to.",\n        "required": true,\n        "settings": {\n          "referenced_apps": [\n            {\n              "app_id": 2\n            }\n          ]\n        }\n      }\n    }\n  ]\n}\n')))),(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="\u2b05\ufe0f \xa0\xa0   Response"',title:'"\u2b05\ufe0f',"\xa0\xa0":!0,"":!0,'Response"':!0},'{\n  "app_id": 1,\n  "workspace_id": 1,\n  "slug": "development-issues",\n  "name": "Development-Issues",\n  "record_name": "Issue",\n  "item_name": "Issue",\n  "config": {\n    "item_name": "Issue",\n    "name": "Development-Issues"\n  },\n  "fields": [\n    {\n      "field_id": 1,\n      "slug": "belongs_to_epic",\n      "label": "Belongs to Epic",\n      "type": "app",\n      "field_type": "single_relation",\n      "config": {\n        "label": "Belongs to Epic",\n        "slug": "belongs_to_epic",\n        "external_id": "belongs_to_epic",\n        "description": "The epic this issue belongs to.",\n        "required": true,\n        "always_hidden": false,\n        "hidden_if_empty": false,\n        "settings": {\n          "multiple": false,\n          "referenced_apps": [\n            {\n              "app_id": 2,\n              "app": {\n                "app_id": 2,\n                "icon": "event_available",\n                "name": "Epics",\n                "slug": "epics",\n                "item_name": "Epic",\n                "workspace_id": 1,\n                "config": {\n                  "name": "Epics",\n                  "icon": "event_available",\n                  "record_name": "Epic",\n                  "workspace_id": 1\n                }\n              }\n            }\n          ]\n        }\n      }\n    }\n  ]\n}\n')),(0,p.kt)("h2",{id:"app-update"},"App update"),(0,p.kt)(l.Z,{method:"PUT",url:"https://api.tapeapp.com/v1/app/{appId}",mdxType:"EndpointBadge"}),(0,p.kt)("p",null,'A relation field can be created or updated as part of an App update. Here is an example request body for updating the previously created Development-Issues app with ID 1.\nThe update adds a reference to the "Sprints" app with ID 3 to the "Belongs to Epic" field, and renames the field to "Belongs to".\nWhen updating a relation field, you need to specify all referenced apps again, not just the ones you want to add or remove. Referenced apps that exist in a field and are not specified in the update request are removed from the field.'),(0,p.kt)("p",null,(0,p.kt)("inlineCode",{parentName:"p"},"multi_relation")," fields are updated in the same way as ",(0,p.kt)("inlineCode",{parentName:"p"},"single_relation")," fields."),(0,p.kt)(s.Z,{defaultValue:"curl",mdxType:"Tabs"},(0,p.kt)(o.Z,{value:"curl",label:"cURL",mdxType:"TabItem"},(0,p.kt)(r.Z,{language:"shell",title:"\u27a1\ufe0f \xa0\xa0   Request",mdxType:"ContextCodeBlock"},'\ncurl -X PUT #BASE_URL/v1/app/1 \\\n   -u #USER_API_KEY: \\\n   -H "Content-Type: application/json" \\\n   --data \'{\n    "app_id": 1,\n    "fields": [\n      {\n        "field_type": "single_relation",\n        "config": {\n          "label": "Belongs to",\n          "description": "The epic or sprint this issue belongs to.",\n          "required": true,\n          "settings": {\n            "referenced_apps": [\n              {\n                "app_id": 2\n              },\n              {\n                "app_id": 3\n              }\n            ]\n          }\n        }\n      }\n    ] \n}\'\n')),(0,p.kt)(o.Z,{value:"json",label:"JSON",mdxType:"TabItem"},(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="\u27a1\ufe0f \xa0\xa0   Request">',title:'"\u27a1\ufe0f',"\xa0\xa0":!0,"":!0,'Request">':!0},'{\n  "app_id": 1,\n  "fields": [\n    {\n      "field_type": "single_relation",\n      "config": {\n        "label": "Belongs to",\n        "description": "The epic or sprint this issue belongs to.",\n        "required": true,\n        "settings": {\n          "referenced_apps": [\n            {\n              "app_id": 2\n            },\n            {\n              "app_id": 3\n            }\n          ]\n        }\n      }\n    }\n  ]\n}\n')))),(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="\u2b05\ufe0f \xa0\xa0   Response"',title:'"\u2b05\ufe0f',"\xa0\xa0":!0,"":!0,'Response"':!0},'{\n  "app_id": 1,\n  "workspace_id": 1,\n  "slug": "development-issues",\n  "name": "Development-Issues",\n  "record_name": "Issue",\n  "item_name": "Issue",\n  "config": {\n    "item_name": "Issue",\n    "name": "Development-Issues"\n  },\n  "fields": [\n    {\n      "field_id": 1,\n      "slug": "belongs_to_epic",\n      "label": "Belongs to Epic",\n      "type": "app",\n      "field_type": "single_relation",\n      "config": {\n        "label": "Belongs to Epic",\n        "slug": "belongs_to_epic",\n        "external_id": "belongs_to_epic",\n        "description": "The epic this issue belongs to.",\n        "required": true,\n        "always_hidden": false,\n        "hidden_if_empty": false,\n        "settings": {\n          "multiple": false,\n          "referenced_apps": [\n            {\n              "app_id": 2,\n              "app": {\n                "app_id": 2,\n                "icon": "event_available",\n                "name": "Epics",\n                "slug": "epics",\n                "item_name": "Epic",\n                "workspace_id": 1,\n                "config": {\n                  "name": "Epics",\n                  "icon": "event_available",\n                  "record_name": "Epic",\n                  "workspace_id": 1\n                }\n              }\n            },\n            {\n              "app_id": 3,\n              "app": {\n                "app_id": 3,\n                "icon": "event_available",\n                "name": "Sprints",\n                "slug": "sprints",\n                "item_name": "Sprint",\n                "workspace_id": 1,\n                "config": {\n                  "name": "Sprints",\n                  "icon": "event_available",\n                  "record_name": "Sprint",\n                  "workspace_id": 1\n                }\n              }\n            }\n          ]\n        }\n      }\n    }\n  ]\n}\n```\n\n')))}h.isMDXComponent=!0}}]);